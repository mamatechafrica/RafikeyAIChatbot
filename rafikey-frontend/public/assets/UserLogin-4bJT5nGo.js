import{f as W,k as H,i as f,O as I,m as D,p as x,t as E,n as $,q as Y,c as l,g as s,b as J,u as i,B as K,d as h,v as m,x as j,y as _,A as S,z as T,a as c,w as p,C as g,r as Q,D as q,T as X,j as Z,o}from"./index-DmnJlZDj.js";import{_ as ee}from"./rafikey-key-oWRpNpDv.js";import{u as P}from"./vee-validate-BJN4s3-T.js";import{_ as se}from"./LoadingPage_1.vue_vue_type_script_setup_true_lang-PHAv7mdy.js";import{_ as te}from"./DialogModal.vue_vue_type_script_setup_true_lang-9d9wul7a.js";import{t as ae}from"./imageToggle-FCI9H9iY.js";import"./description-D5UqeOi9.js";import"./open-closed-amZRd_iR.js";import"./rafikey-icon-dark-Bxp0jwbr.js";const oe="/assets/login-TLuWvMux.png",le={key:0,class:"dark:bg-lightgray"},re={class:"min-h-screen overflow-hidden w-full hidden lg:block"},ie={class:"grid grid-cols-2 w-10/12 mx-auto"},ne={class:"col-span-1"},de={class:""},ue=["src"],pe={class:"flex flex-col space-y-10"},xe={class:""},me={class:"relative"},ce={key:0,class:"text-rose-500"},ge={class:"relative"},fe=["type"],be={key:0,class:"text-rose-500"},ve={key:0,class:"flex gap-2"},ke={class:"text-rose-500"},ye={class:"flex justify-between"},we={class:"flex gap-2"},he={key:0,class:"text-small"},_e={key:1,class:"loading loading-spinner loading-sm"},Me={class:"w-10/12"},Ce={class:"text-center text-slate-800 dark:text-white extra-small mt-4"},Le={class:"lg:hidden block min-h-screen overflow-hidden w-full"},Ue={class:"flex flex-col md:px-20 px-10 md:space-y-10 space-y-2"},Ve={class:"md:space-y-4 space-y-2"},Ae={class:"space-y-3"},De={class:"flex gap-2"},Ee={class:"relative space-y-3"},$e=["type"],je={key:0,class:"flex gap-2"},Se={class:"text-rose-500"},Te={class:"flex justify-between"},qe={class:"w-3/4 mx-auto flex justify-between items-center pt-6"},Pe={key:0,class:"text-extra-small"},Re={key:1,class:"loading loading-spinner loading-sm"},Be={class:"text-center text-slate-800 dark:text-white text-extra-small mt-4"},Oe={class:"grid grid-cols-2 gap-4"},Ne={class:"col-span-1 w-full"},Fe={key:0,class:"text-extra-small md:text-small"},ze={key:1,class:"loading loading-spinner loading-sm"},Ge={class:"col-span-1"},We={key:1},ts=W({__name:"UserLogin",setup(He){const r=H(),b=f(!1),M=f(!1),R=I(),d=D({username:"",password:""});x(()=>r.dialogModal.isOpen,t=>{t||(r.isAnonymous=!1)}),E(()=>{b.value&&r.setDialogModal(!1)});const C=Z(),v=f(!1),L=f(!0),u=f(!1),n=D({isError:!1,message:""}),U=$(()=>u.value?"text":"password"),B=t=>t?!0:"Username is required",{value:O,errorMessage:N,meta:k}=P("username",B);x(()=>d.username,t=>{O.value=t});const F=t=>t?!0:"Password is required",{value:z,errorMessage:G,meta:y}=P("password",F);x(()=>d.password,t=>{z.value=t});const V=$(()=>k.validated&&k.valid&&y.validated&&y.valid);x(V,t=>{t&&(n.isError=!1,n.message="")});const A=()=>{V.value?(v.value=!0,R.login(d).then(t=>{t.result==="ok"?C.push({name:"newChat"}):(n.message=t.message,n.isError=!0)}).catch(()=>{n.isError=!0,n.message="An error occurred while logging in, please try again later"}).finally(()=>{v.value=!1})):(n.isError=!0,n.message="Please fill in all fields correctly")};return x(()=>r.isAnonymous,t=>{t?r.setDialogModal(!0):r.setDialogModal(!1)}),x(()=>b.value,t=>{t&&(M.value=!0,setTimeout(()=>{C.push({name:"guest-page"})},3e3))}),Y(()=>{setTimeout(()=>{L.value=!1},3e3),r.isAnonymous=!1}),E(()=>{b.value&&r.setDialogModal(!1)}),(t,e)=>{const w=Q("router-link");return L.value?(o(),l("div",We,[c(se)])):(o(),l("div",le,[s("div",re,[s("div",ie,[s("div",ne,[s("div",de,[s("img",{src:i(ae)(),alt:"rafikey-icon",class:"w-60"},null,8,ue)]),s("div",pe,[e[20]||(e[20]=s("div",{class:"flex flex-col space-y-6"},[s("h2",{class:"text-extra-extra-large dark:text-white font-semibold"},"Login"),s("p",{class:"text-large text-gray-700 dark:text-white"},"Login to access your Rafikey account.")],-1)),s("div",xe,[s("form",{class:K(["flex flex-col w-10/12",[n.isError?"space-y-4 xl:space-y-12":"space-y-6 xl:space-y-12"]])},[s("div",me,[m(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>d.username=a),id:"usernameLarge",type:"text",required:"",class:"w-full dark:bg-darkgray dark:text-white border-[1px] border-gray-300 rounded-2xl p-4 text-small d",placeholder:"johndoe"},null,512),[[j,d.username]]),e[13]||(e[13]=s("label",{class:"absolute dark:text-white dark:bg-darkgray left-1 -top-3 text-slate-600 px-1 text-extra-extra-small bg-white",for:"usernameLarge"}," Username ",-1)),i(k).validated&&!i(k).valid?(o(),l("span",ce,_(i(N)),1)):h("",!0)]),s("div",ge,[m(s("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>d.password=a),id:"passwordLarge",type:U.value,class:"w-full dark:text-white dark:bg-darkgray border-[1px] border-gray-300 rounded-2xl p-4 text-small",required:"",placeholder:"********"},null,8,fe),[[S,d.password]]),e[14]||(e[14]=s("label",{class:"absolute dark:bg-darkgray dark:text-white left-1 -top-3 text-slate-600 px-1 text-extra-extra-small bg-white",for:"passwordLarge"}," Password ",-1)),i(y).validated&&!i(y).valid?(o(),l("span",be,_(i(G)),1)):h("",!0),u.value?(o(),l("span",{key:1,onClick:e[2]||(e[2]=a=>u.value=!1),class:"dark:text-white material-icons-outlined absolute right-3 cursor-pointer top-4"},"visibility_off")):(o(),l("span",{key:2,onClick:e[3]||(e[3]=a=>u.value=!0),class:"dark:text-white material-icons-outlined absolute right-3 top-4 cursor-pointer d"},"visibility"))]),n.isError?(o(),l("div",ve,[e[15]||(e[15]=s("span",{class:"material-icons-outlined text-rose-500"},"error",-1)),s("span",ke,_(n.message),1)])):h("",!0),s("div",ye,[s("div",we,[m(s("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>i(r).isAnonymous=a),type:"checkbox",class:"checked:bg-button-light mt-1 checked:border-none checkbox h-4 w-4 text-button-light dark:border-white border-slate-800"},null,512),[[T,i(r).isAnonymous]]),e[16]||(e[16]=s("span",{class:"text-extra-small dark:text-white"},"Remain Anonymous",-1))]),s("div",null,[c(w,{to:"/auth/forgot-password",class:"text-casablanca-300 text-extra-small"},{default:p(()=>e[17]||(e[17]=[g("Forgot Password ")])),_:1})])]),s("div",{onClick:A,class:"btn btn-sm text-lg rounded-2xl py-6 bg-button-light border-none shadow-none"},[v.value?(o(),l("span",_e)):(o(),l("span",he,"Login"))])],2),s("div",Me,[s("p",Ce,[e[19]||(e[19]=g(" Don't have an account? ")),c(w,{to:"/auth/register",class:"text-rose-400 hover:text-rose-300"},{default:p(()=>e[18]||(e[18]=[g(" Sign up ")])),_:1})])])])])]),e[21]||(e[21]=s("div",{class:"col-span-1 relative flex justify-center w-full"},[s("img",{src:oe,alt:"rafikey-login-image"})],-1))])]),s("div",Le,[e[33]||(e[33]=s("div",{class:"flex justify-center"},[s("div",{class:"w-44 h-24"},[s("img",{src:ee,alt:"rafikey-logo"})])],-1)),s("div",Ue,[e[30]||(e[30]=s("div",{class:"flex flex-col items-center md:space-y-4 space-y-2"},[s("h2",{class:"text-extra-large font-semibold dark:text-white"},"Login"),s("p",{class:"text-extra-small text-gray-700 text-center dark:text-white"},"Welcome back to Rafikey")],-1)),e[31]||(e[31]=s("div",{class:"border-b-[1px] border-stone-500 w-full pt-10 md:pt-0"},null,-1)),s("form",Ve,[s("div",Ae,[e[22]||(e[22]=s("label",{for:"username",class:"dark:text-white text-black text-extra-small"},"Username",-1)),m(s("input",{id:"username","onUpdate:modelValue":e[5]||(e[5]=a=>d.username=a),type:"text",class:"dark:bg-darkgray dark:text-white w-full p-4 text-extra-small border-[1px] border-gray-300 rounded-2xl",required:"",placeholder:"Choose a username"},null,512),[[j,d.username]])]),s("div",De,[m(s("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>i(r).isAnonymous=a),type:"checkbox",class:"checked:bg-button-light mt-1 checked:border-none checkbox h-4 w-4 text-button-light border-slate-800 dark:border-white"},null,512),[[T,i(r).isAnonymous]]),e[23]||(e[23]=s("span",{class:"text-extra-small dark:text-white"},"Remain Anonymous",-1))]),s("div",Ee,[e[24]||(e[24]=s("label",{class:"dark:text-white text-black text-extra-small",for:"password"}," Password ",-1)),m(s("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>d.password=a),id:"password",type:U.value,class:"dark:bg-darkgray dark:text-white w-full border-[1px] border-gray-300 rounded-2xl md:p-4 p-4 text-extra-small",required:"",placeholder:"********"},null,8,$e),[[S,d.password]]),u.value?(o(),l("span",{key:0,onClick:e[8]||(e[8]=a=>u.value=!1),class:"dark:text-white material-icons-outlined absolute right-3 cursor-pointer top-10 md:top-10"},"visibility_off")):(o(),l("span",{key:1,onClick:e[9]||(e[9]=a=>u.value=!0),class:"dark:text-white material-icons-outlined absolute right-3 top-10 md:top-10 cursor-pointer"},"visibility"))])]),n.isError?(o(),l("div",je,[e[25]||(e[25]=s("span",{class:"material-icons-outlined text-rose-500"},"error",-1)),s("span",Se,_(n.message),1)])):h("",!0),e[32]||(e[32]=s("div",{class:"border-b-[1px] border-stone-500 w-full pt-10"},null,-1)),s("div",Te,[e[27]||(e[27]=s("div",{class:"space-x-2"},[s("input",{type:"checkbox",class:"checkbox w-4 h-4 rounded-full border-slate-800 dark:border-white text-casablanca-300"}),s("span",{class:"text-extra-small dark:text-white"},"Remember me")],-1)),s("div",null,[c(w,{to:"/auth/forgot-password",class:"text-casablanca-300 md:text-lg text-sm"},{default:p(()=>e[26]||(e[26]=[g("Forgot Password")])),_:1})])]),s("div",qe,[s("button",{onClick:A,class:"btn w-full btn-sm md:text-lg text-sm rounded-2xl py-6 px-4 bg-button-light border-none shadow-none"},[v.value?(o(),l("span",Re)):(o(),l("span",Pe,"Login"))])]),s("div",null,[s("p",Be,[e[29]||(e[29]=g(" Don't have an account? ")),c(w,{to:"/auth/register",class:"text-rose-400 text-extra-small"},{default:p(()=>e[28]||(e[28]=[g(" Sign Up ")])),_:1})])])])]),(o(),J(X,{to:"body"},[c(te,{"is-open":i(r).dialogModal.isOpen,onCloseModal:e[12]||(e[12]=a=>i(r).setDialogModal(!1))},{title:p(()=>e[34]||(e[34]=[s("div",{class:"flex justify-center"},[s("span",{class:"material-icons-outlined text-casablanca-300 !text-3xl lg:!text-4xl"},"info")],-1)])),body:p(()=>e[35]||(e[35]=[s("div",{class:"flex flex-col items-center py-2"},[s("p",{class:"text-ssmall lg:text-large dark:text-white"},"Are you Sure?"),s("span",{class:"text-extra-small lg:text-small dark:text-white"},"Your chats won't be saved, if you login anonymously")],-1)])),footer:p(()=>[s("div",Oe,[s("div",Ne,[s("button",{onClick:e[10]||(e[10]=q(a=>b.value=!0,["stop"])),class:"w-full btn btn-sm border-none bg-casablanca-300 shadow-none px-4 rounded-lg"},[M.value?(o(),l("span",ze)):(o(),l("span",Fe,"Ok"))])]),s("div",Ge,[s("button",{onClick:e[11]||(e[11]=q(a=>i(r).setDialogModal(!1),["stop"])),class:"w-full btn btn-sm bg-transparent border-casablanca-300 shadow-none rounded-lg"},e[36]||(e[36]=[s("span",{class:"text-extra-small md:text-small dark:text-white"},"Cancel",-1)]))])])]),_:1},8,["is-open"])]))]))}}});export{ts as default};
