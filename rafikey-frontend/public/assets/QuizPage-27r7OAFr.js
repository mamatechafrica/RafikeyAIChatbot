import{_ as L}from"./video-game-CDHpWuvN.js";import{f as Q,k as S,i as c,p as _,q as E,c as i,g as s,G as N,N as j,o as l,B as $,a0 as B,D as I,u as n,y as v,d as m,a as V,h as G,j as H}from"./index-DmnJlZDj.js";const C="/assets/no-data-I3x7r5ri.svg",O={key:0},D={key:0,class:"space-y-4"},F=["onClick"],M={class:"text-extra-small dark:text-white"},R={key:1,class:"flex flex-col items-center justify-center"},T={key:1,class:"text-center dark:text-white"},P=Q({__name:"QuestionItem",props:{isLoadingAnswer:{type:Boolean}},emits:["errorQuestion","selectedAnswer"],setup(z,{emit:t}){const h=t,k=z,a=S(),d=c(),u=c(!1),x=c(!0),w=c(null),f=c([]);_(()=>k.isLoadingAnswer,r=>{var e,o;r||((e=a.correctAnswer)!=null&&e.correct?w.value=!0:(o=d.value)==null||o.options.map(p=>{p.is_correct&&f.value.push(p.id)}))});const b=r=>{a.getQuestion(r).then(e=>{if((e==null?void 0:e.result)==="ok")d.value=e.data;else{console.log("Error fetching question"),u.value=!0;return}}).catch(()=>{u.value=!0}).finally(()=>{x.value=!1,h("errorQuestion",u.value)})};E(()=>{b(a.quizzes[0].id)});const g=c(null),y=r=>{g.value=r,a.isSelected=!0,h("selectedAnswer",{questionId:a.quizzes[0].id,optionId:r})};return _(()=>a.quizzes.length,r=>{r&&b(a.quizzes[0].id)}),(r,e)=>x.value?(l(),i("div",T,"Loading...")):(l(),i("div",O,[!u.value&&d.value?(l(),i("div",D,[e[0]||(e[0]=s("p",{class:"text-center pb-2 dark:text-lightgrayOne text-extra-extra-small"}," Select one option ",-1)),(l(!0),i(N,null,j(d.value.options,o=>{var p,q,A;return l(),i("div",{onClick:I(ne=>y(o.id),["stop"]),key:o.id,style:B(n(a).isSelected?"pointer-events: none;":""),class:$([[(p=n(a).correctAnswer)!=null&&p.correct&&g.value===o.id?"bg-greenButtonGame":"",!((q=n(a).correctAnswer)!=null&&q.correct)&&f.value.includes(o.id)?"bg-greenButtonGame":"",!((A=n(a).correctAnswer)!=null&&A.correct)&&g.value===o.id?"bg-coral-red-700":"",n(a).isSelected?" cursor-not-allowed":""],"cursor-pointer border-lightgrayThree flex justify-center p-3 border-[1px] rounded-[12px]"])},[s("p",M,v(o.text),1)],14,F)}),128))])):(l(),i("div",R,e[1]||(e[1]=[s("div",{class:"w-20 flex justify-center"},[s("img",{src:C,alt:"no-data-image"})],-1),s("span",{class:"dark:text-white pt-2"},"Unable to load data",-1)])))]))}}),U={class:"flex flex-col items-center"},Y={key:0,class:"pb-4"},J={key:1,class:"lg:w-1/3 md:w-2/3 w-full dark:bg-transparent bg-link-water-50 dark:border-veryLightEight py-[27px] px-[33px] border-[1px] rounded-[14px]"},K={class:"space-y-8"},W={class:"flex justify-center"},X={class:"font-bold text-small md:text-[20px] dark:text-white"},Z={class:"flex justify-center"},ee={class:"font-bold text-small md:text-[20px] dark:text-white"},te={key:0,class:"w-full pt-4 space-y-4"},se={class:"dark:text-white"},re={key:2,class:"py-6"},oe={key:3,class:"h-[calc(100vh-10rem)] flex items-center justify-center"},le=Q({__name:"QuizPage",setup(z){const t=S(),h=c(!1),k=c(!1),a=r=>{k.value=r},d=c(!1),u=c(!1),x=c(!1),w=r=>{t.answerQuestion(r).then(e=>{var o;u.value=!0,t.totalQuestions+=1,(e==null?void 0:e.result)==="ok"?((o=e.data)!=null&&o.correct&&(t.score+=1),t.setCorrectAnswer(e.data),d.value=!0):x.value=!0}).catch(e=>{x.value=!0,console.error("Error submitting answer: ",e)}).finally(()=>{u.value=!1})},f=()=>{t.quizzes.shift(),t.isSelected=!1},b=()=>{f(),t.totalQuestions+=1},g=()=>{f(),d.value=!1,t.correctAnswer={correct:null,feedback:""}},y=H();return _(()=>t.quizzes,r=>{r.length===0&&y.push({name:"game-page-quiz-result"})},{deep:!0}),(r,e)=>{var o,p;return l(),i("div",U,[n(t).quizzes.length?(l(),i("div",Y,e[0]||(e[0]=[s("div",{class:"flex justify-center"},[s("img",{src:L,alt:"video-game-image"})],-1)]))):m("",!0),!h.value&&n(t).quizzes.length?(l(),i("div",J,[s("div",K,[s("div",W,[s("p",X," Question "+v(n(t).quizzes[0].order)+" of "+v(n(t).quizzes[n(t).quizzes.length-1].order),1)]),s("div",Z,[s("p",ee,v(n(t).quizzes[0].text),1)]),s("div",null,[V(P,{onErrorQuestion:a,onSelectedAnswer:w,isLoadingAnswer:u.value},null,8,["isLoadingAnswer"])])]),((o=n(t).correctAnswer)==null?void 0:o.correct)===!1?(l(),i("div",te,[e[1]||(e[1]=s("p",{class:"text-coral-red-700"},"Oops! That's not it",-1)),s("p",se,v((p=n(t).correctAnswer)==null?void 0:p.feedback),1)])):m("",!0)])):m("",!0),n(t).quizzes.length>0&&!k.value?(l(),i("div",re,[d.value?(l(),i("button",{key:1,onClick:g,class:"btn btn-sm dark:bg-transparent bg-button-light text-extra-small shadow-none dark:text-white py-5 px-20 btn-ghost dark:bg-darkgray rounded-[12px] border-casablanca-300 borer-[1px]"},e[3]||(e[3]=[s("span",null,"Next",-1)]))):(l(),i("button",{key:0,onClick:b,class:"btn btn-sm dark:bg-transparent bg-button-light text-extra-small shadow-none dark:text-white py-5 px-20 btn-ghost dark:bg-darkgray rounded-[12px] border-casablanca-300 borer-[1px]"},e[2]||(e[2]=[s("span",null,"Skip",-1)])))])):m("",!0),n(t).quizzes.length===0?(l(),i("div",oe,e[4]||(e[4]=[G('<div class="flex flex-col md:space-y-8 space-y-6 md:py-8 py-4 items-center mx-auto"><img src="'+C+'" alt="no-question-image" class="w-1/3"><div class="flex flex-col items-center"><span class="dark:text-white text-center text-extra-large">You are done!</span><span class="dark:text-white text-small">No more questions</span></div></div><div><button></button></div>',2)]))):m("",!0)])}}});export{le as default};
