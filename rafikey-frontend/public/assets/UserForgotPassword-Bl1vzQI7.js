import{f as j,i as b,O as C,m as S,p as w,n as B,c as r,g as e,u as o,j as P,B as V,d as m,v as h,x as k,y as g,h as D,G as F,o as l}from"./index-DmnJlZDj.js";import{_ as A}from"./forgot-password-BDpEf0DD.js";import{_ as M}from"./rafikey-key-oWRpNpDv.js";import{u as q}from"./vee-validate-BJN4s3-T.js";import{s as u}from"./alert-4nn6fE_Q.js";import{t as N}from"./imageToggle-FCI9H9iY.js";import"./rafikey-icon-dark-Bxp0jwbr.js";const R={class:"h-screen w-full py-8 overflow-hidden hidden lg:block dark:bg-lightgray"},U={class:"w-10/12 grid grid-cols-2 mx-auto gap-8"},$={class:"col-span-1"},H=["src"],O={class:"flex flex-col space-y-12"},T={class:"relative"},z={key:0,class:"text-rose-500"},G={key:0,class:"flex gap-2"},I={class:"text-rose-500"},L={key:0,class:"text-extra-small"},J={key:1,class:"loading loading-spinner loading-sm"},K={class:"lg:hidden block overflow-hidden h-screen w-full dark:bg-lightgray"},Q={class:"grid grid-cols-3 gap-4 items-center px-4 py-2"},W={class:"flex flex-col md:px-20 px-10 space-y-6"},X={class:"space-y-8"},Y={class:"space-y-3"},Z={key:0,class:"text-rose-500"},ee={key:0,class:"flex gap-2"},te={class:"text-rose-500"},se={class:"w-3/4 mx-auto flex-col space-y-2 justify-between items-center pt-6"},ae={key:0,class:"text-extra-small"},re={key:1,class:"loading loading-spinner loading-sm"},ue=j({__name:"UserForgotPassword",setup(oe){const p=P(),n=b(""),_=C(),c=b(!1),a=S({isError:!1,message:""}),E=s=>s?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?s.length>30?"Email too long":!0:"Email must be valid":"Email is required",{value:x,errorMessage:f,meta:i}=q("email",E);w(()=>n.value,s=>{s&&(x.value=s)});const y=B(()=>i.validated&&i.valid);w(y,s=>{s&&(a.isError=!1,a.message="")});const v=()=>{y.value?(c.value=!0,_.forgotPassword(x.value).then(s=>{(s==null?void 0:s.result)==="ok"?u({type:"success",message:s.message}):u({type:"error",message:"An error occurred please try again later"})}).catch(()=>{u({type:"error",message:"An error occurred please try again later"})}).finally(()=>{c.value=!1})):(a.isError=!0,a.message="Please fill in your email")};return(s,t)=>(l(),r(F,null,[e("div",R,[e("div",U,[e("div",$,[e("div",null,[e("img",{src:o(N)(),alt:"rafikey-icon",class:"w-60"},null,8,H)]),e("div",O,[e("div",{onClick:t[0]||(t[0]=d=>o(p).go(-1)),class:"flex cursor-pointer text-gray-1000 justify-start w-fit hover:bg-transparent border-none hover:border-none btn btn-sm btn-ghost shadow-none"},t[4]||(t[4]=[e("span",{class:"material-icons-outlined dark:text-white"},"chevron_left",-1),e("span",{class:"text-extra-small font-light dark:text-white"},"Back to login",-1)])),t[7]||(t[7]=e("div",{class:"flex flex-col space-y-6"},[e("h2",{class:"text-extra-extra-large font-semibold dark:text-white"}," Forgot your password? "),e("p",{class:"text-large text-gray-700 dark:text-white"}," Don't worry, happens to all of us. Enter your email bellow to recover your password ")],-1)),e("div",null,[e("form",{class:V(["flex flex-col w-10/12",a.isError?" space-y-4 xl:space-y-12":"space-y-12 "])},[e("div",T,[h(e("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>n.value=d),id:"email",type:"email",required:"",class:"w-full dark:bg-darkgray dark:text-white border-[1px] border-gray-300 rounded-2xl p-4 text-small",placeholder:"johndoe@gmail.com"},null,512),[[k,n.value]]),t[5]||(t[5]=e("label",{class:"absolute left-1 -top-3 dark:text-white dark:bg-darkgray text-slate-600 px-1 text-text-extra-small bg-white",for:"email"}," Email address ",-1)),o(i).validated&&!o(i).valid?(l(),r("span",z,g(o(f)),1)):m("",!0)]),a.isError?(l(),r("div",G,[t[6]||(t[6]=e("span",{class:"material-icons-outlined text-rose-500"},"error",-1)),e("span",I,g(a.message),1)])):m("",!0),e("div",{onClick:v,class:"btn btn-sm rounded-2xl py-6 bg-button-light border-none shadow-none"},[c.value?(l(),r("span",J)):(l(),r("span",L,"Submit"))])],2)])])]),t[8]||(t[8]=e("div",{class:"col-span-1 flex items-center justify-center"},[e("div",{class:"bg-gray-100 dark:bg-lightgray rounded-2xl h-5/6"},[e("img",{src:A,alt:"forgot-password-image"})])],-1))])]),e("div",K,[e("div",Q,[e("div",{onClick:t[2]||(t[2]=d=>o(p).go(-1)),class:"col-span-1 flex cursor-pointer text-gray-1000 justify-start w-fit hover:bg-transparent border-none hover:border-none btn btn-sm btn-ghost shadow-none"},t[9]||(t[9]=[e("span",{class:"material-icons-outlined dark:text-white"},"chevron_left",-1),e("span",{class:"text-extra-small font-light dark:text-white"},"Back",-1)])),t[10]||(t[10]=e("div",{class:"col-span-1 flex justify-center"},[e("div",{class:"w-54 flex justify-center"},[e("img",{src:M,alt:"rafikey-logo"})])],-1))]),e("div",W,[t[13]||(t[13]=D('<div class="flex flex-col items-center space-y-4"><h2 class="text-extra-large font-semibold dark:text-white">Forgot Password</h2><div class="text-extra-small md:space-y-2 space-y-0.5"><p class="text-gray-700 text-center dark:text-white"> Don&#39;t worry. Happens to all of us. </p><p class="text-gray-700 text-center dark:text-white"> Enter your Email below to recover your password </p></div></div><div class="border-b border-gray-400 w-full"></div>',2)),e("form",X,[e("div",Y,[t[11]||(t[11]=e("label",{for:"email",class:"dark:text-white text-black text-extra-small"},"Email",-1)),h(e("input",{"onUpdate:modelValue":t[3]||(t[3]=d=>n.value=d),id:"email",type:"email",class:"w-full dark:bg-darkgray dark:text-white border-[1px] border-gray-300 rounded-2xl md:p-4 p-3 text-extra-small",required:"",placeholder:"maryjane@gmail.com"},null,512),[[k,n.value]]),o(i).validated&&!o(i).valid?(l(),r("span",Z,g(o(f)),1)):m("",!0)])]),a.isError?(l(),r("div",ee,[t[12]||(t[12]=e("span",{class:"material-icons-outlined text-rose-500"},"error",-1)),e("span",te,g(a.message),1)])):m("",!0),t[14]||(t[14]=e("div",{class:"border-b border-gray-400 w-full pt-6"},null,-1)),e("div",se,[e("button",{onClick:v,class:"btn w-full btn-sm md:text-lg text-sm rounded-2xl py-6 bg-button-light border-none shadow-none"},[c.value?(l(),r("span",re)):(l(),r("span",ae,"Submit"))])])])])],64))}});export{ue as default};
