import{f as N,i as v,n as y,O as z,m as $,p as k,c as r,g as s,u as l,d as w,v as g,A as f,y as m,h as O,j as T,o}from"./index-DmnJlZDj.js";import{_ as Y}from"./forgot-password-BDpEf0DD.js";import{_ as Z}from"./rafikey-key-oWRpNpDv.js";import{u as M}from"./vee-validate-BJN4s3-T.js";import{s as b}from"./alert-4nn6fE_Q.js";import{t as F}from"./imageToggle-FCI9H9iY.js";import"./rafikey-icon-dark-Bxp0jwbr.js";const H={class:"h-screen overflow-hidden w-full hidden lg:block dark:bg-lightgray"},I={class:"grid grid-cols-2 w-10/12 mx-auto gap-8"},L={class:"col-span-1"},G=["src"],J={class:"flex flex-col space-y-12"},K={class:"space-y-8"},Q={class:"flex flex-col space-y-12 w-10/12"},W={class:"relative"},X=["type"],ee={key:2,class:"text-rose-500"},se={class:"relative"},te=["type"],re={key:0,class:"text-rose-500"},oe={key:0,class:"flex gap-2"},ae={class:"text-rose-500"},le={class:"w-10/12 flex justify-between items-center"},ie={key:0,class:"text-extra-small"},de={key:1,class:"loading loading-spinner loading-sm"},ne={class:"lg:hidden block min-h-screen overflow-hidden w-full dark:bg-lightgray"},ue={class:"flex flex-col md:px-20 px-10 space-y-6"},pe={class:"space-y-8"},ce={class:"relative space-y-2"},we=["type"],me={key:2,class:"text-rose-500"},xe={class:"relative space-y-2"},ge=["type"],fe={key:2,class:"text-rose-500"},ve={key:0,class:"flex gap-2"},ye={class:"text-rose-500"},ke={class:"w-3/4 mx-auto flex justify-between items-center pt-6"},be={key:0,class:"text-extra-small"},he={key:1,class:"loading loading-spinner loading-sm"},Me=N({__name:"UserResetPassword",props:{token:{}},setup(R){const n=v(!1),u=v(!1),h=y(()=>n.value?"text":"password"),P=y(()=>u.value?"text":"password"),x=v(!1),q=z(),j=T(),d=$({isError:!1,message:""}),A=R,i=$({newPassword:"",confirmPassword:""}),U=t=>t?/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d\S]{6,}$/.test(t)?!0:"Password must contain at least 6 characters, one uppercase letter, one lowercase letter and one number":"Password is required",{value:_,errorMessage:C,meta:p}=M("password",U);k(()=>i.newPassword,t=>{t&&(_.value=t)});const B=t=>t?t!==_.value?"Passwords do not match":!0:"Confirm Password is required",{value:D,errorMessage:V,meta:c}=M("confirmPassword",B);k(()=>i.confirmPassword,t=>{t&&(D.value=t)});const E=y(()=>p.validated&&p.valid&&c.validated&&c.valid);k(E,t=>{t&&(d.isError=!1,d.message="")});const S=()=>{E.value?(x.value=!0,q.resetPassword({token:A.token,newPassword:i.newPassword}).then(t=>{console.log("Reset password response",t),(t==null?void 0:t.result)==="ok"?(b({type:"success",message:t.message}),setTimeout(()=>{j.push({name:"login"})},3e3)):b({type:"error",message:"Something went wrong, please try again"})}).catch(()=>{b({type:"error",message:"Something went wrong, please try again"})}).finally(()=>{x.value=!1})):(d.isError=!0,d.message="Please fill in all the fields correctly")};return(t,e)=>(o(),r("div",null,[s("div",H,[s("div",I,[s("div",L,[s("div",null,[s("img",{src:l(F)(),alt:"rafikey-icon",class:"w-60"},null,8,G)]),s("div",J,[e[15]||(e[15]=s("div",{class:"flex flex-col space-y-6"},[s("h2",{class:"text-extra-extra-large font-semibold dark:text-white"},"Set a password"),s("p",{class:"text-large text-gray-700 dark:text-white"},"Your previous password has been reset. Please set a new password for your account")],-1)),s("div",K,[s("form",Q,[s("div",W,[g(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>i.newPassword=a),id:"newPassword-1",type:h.value,required:"",placeholder:"******",class:"w-full dark:bg-darkgray dark:text-white border-[1px] border-gray-300 rounded-2xl p-4 lg:text-lg text-sm"},null,8,X),[[f,i.newPassword]]),e[12]||(e[12]=s("label",{class:"absolute dark:text-white dark:bg-darkgray left-1 -top-3 text-slate-600 px-1 text-text-extra-extra-small bg-white",for:"newPassword-1"}," Create Password ",-1)),n.value?(o(),r("span",{key:0,onClick:e[1]||(e[1]=a=>n.value=!1),class:"dark:text-white material-icons-outlined absolute cursor-pointer right-3 top-6"},"visibility_off")):(o(),r("span",{key:1,onClick:e[2]||(e[2]=a=>n.value=!0),class:"dark:text-white material-icons-outlined absolute cursor-pointer right-3 top-6"},"visibility")),l(p).validated&&!l(p).valid?(o(),r("span",ee,m(l(C)),1)):w("",!0)]),s("div",se,[g(s("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>i.confirmPassword=a),id:"confirmPassword-1",type:P.value,required:"",placeholder:"******",class:"w-full dark:bg-darkgray dark:text-white border-[1px] border-gray-300 rounded-2xl p-4 lg:text-lg text-sm"},null,8,te),[[f,i.confirmPassword]]),e[13]||(e[13]=s("label",{class:"absolute dark:text-white dark:bg-darkgray left-1 -top-3 text-slate-600 px-1 text-text-extra-extra-small bg-white",for:"confirmPassword-1"}," Re-enter Password ",-1)),l(c).validated&&!l(c).valid?(o(),r("span",re,m(l(V)),1)):w("",!0),u.value?(o(),r("span",{key:1,onClick:e[4]||(e[4]=a=>u.value=!1),class:"dark:text-white material-icons-outlined absolute cursor-pointer right-3 top-6"},"visibility_off")):(o(),r("span",{key:2,onClick:e[5]||(e[5]=a=>u.value=!0),class:"dark:text-white material-icons-outlined absolute cursor-pointer right-3 top-6"},"visibility"))])]),d.isError?(o(),r("div",oe,[e[14]||(e[14]=s("span",{class:"material-icons-outlined text-rose-500"},"error",-1)),s("span",ae,m(d.message),1)])):w("",!0),s("div",le,[s("button",{onClick:S,class:"btn w-full rounded-2xl py-6 bg-button-light border-none shadow-none"},[x.value?(o(),r("span",de)):(o(),r("span",ie,"Set Password"))])])])])]),e[16]||(e[16]=s("div",{class:"col-span-1 flex justify-center items-center"},[s("div",{class:"bg-gray-100 dark:bg-lightgray rounded-2xl h-5/6"},[s("img",{src:Y,alt:"reset-password-images"})])],-1))])]),s("div",ne,[e[22]||(e[22]=s("div",{class:"flex justify-center"},[s("img",{src:Z,alt:"rafikey-logo",class:"w-24"})],-1)),s("div",ue,[e[20]||(e[20]=O('<div class="flex flex-col items-center space-y-4"><h2 class="text-extra-large font-semibold dark:text-white">Reset your Password</h2><div class="text-extra-small md:space-y-2 space-y-0.5"><p class="text-gray-700 text-center dark:text-white">Your previous password has been reset</p><p class="text-gray-700 text-center dark:text-white">Please set a new password for your account.</p></div></div><div class="border-b-[1px] border-stone-500 w-full pt-8"></div>',2)),s("form",pe,[s("div",ce,[e[17]||(e[17]=s("label",{class:"text-gray-950 dark:text-white text-extra-small",for:"newPassword-2"}," Create Password ",-1)),g(s("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>i.newPassword=a),id:"newPassword-2",type:h.value,class:"w-full dark:bg-darkgray dark:text-white border-[1px] border-gray-300 rounded-2xl p-4 md:text-lg text-sm",required:"",placeholder:"******"},null,8,we),[[f,i.newPassword]]),n.value?(o(),r("span",{key:0,onClick:e[7]||(e[7]=a=>n.value=!1),class:"material-icons-outlined dark:text-white absolute cursor-pointer right-3 md:top-12 top-10"},"visibility_off")):(o(),r("span",{key:1,onClick:e[8]||(e[8]=a=>n.value=!0),class:"material-icons-outlined absolute cursor-pointer dark:text-white right-3 md:top-12 top-10"},"visibility")),l(p).validated&&!l(p).valid?(o(),r("span",me,m(l(C)),1)):w("",!0)]),s("div",xe,[e[18]||(e[18]=s("label",{class:"text-gray-950 dark:text-white text-extra-small",for:"confirmPassword-2"}," Confirm Password ",-1)),g(s("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>i.confirmPassword=a),type:P.value,id:"confirmPassword-2",class:"w-full dark:bg-darkgray dark:text-white border-[1px] border-gray-300 rounded-2xl p-4 md:text-lg text-sm",required:"",placeholder:"******"},null,8,ge),[[f,i.confirmPassword]]),u.value?(o(),r("span",{key:0,onClick:e[10]||(e[10]=a=>u.value=!1),class:"material-icons-outlined dark:text-white absolute cursor-pointer right-3 md:top-12 top-10"},"visibility_off")):(o(),r("span",{key:1,onClick:e[11]||(e[11]=a=>u.value=!0),class:"material-icons-outlined absolute cursor-pointer right-3 dark:text-white md:top-12 top-10"},"visibility")),l(c).validated&&!l(c).valid?(o(),r("span",fe,m(l(V)),1)):w("",!0)])]),d.isError?(o(),r("div",ve,[e[19]||(e[19]=s("span",{class:"material-icons-outlined text-rose-500"},"error",-1)),s("span",ye,m(d.message),1)])):w("",!0),e[21]||(e[21]=s("div",{class:"border-b-[1px] border-stone-500 w-full pt-10"},null,-1)),s("div",ke,[s("button",{onClick:S,class:"btn w-full md:text-lg text-sm rounded-2xl py-6 bg-button-light border-none shadow-none"},[x.value?(o(),r("span",he)):(o(),r("span",be,"Set Password"))])])])])]))}});export{Me as default};
